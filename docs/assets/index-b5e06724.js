import{d,r as h,o as a,a as r,F as b,s as y,x as B,h as $,n as w,y as E,f as u,_ as p,q as I,m as R,c as U,b as n,t as z,u as i,z as k,T as D,l as L,E as P,w as f,v as g,A}from"./index-557e2898.js";import{_ as x,a as V,u as C}from"./p2p-63ad1270.js";const N=["src"],T={key:2,class:"status"},F=d({__name:"index",props:{src:{default:""},size:{default:40},shape:{default:"circle"},showStatus:{type:Boolean,default:!1},online:{type:Boolean,default:!0}},setup(c){const s=h(!1);return(e,t)=>(a(),r("div",{class:w(["avatar",`avatar-${e.shape}`,{downline:!e.online}]),style:E({width:e.size+"px",height:e.size+"px"})},[e.src?(a(),r(b,{key:0},[s.value?(a(),y(x,{key:0,icon:"avatar",size:e.size},null,8,["size"])):(a(),r("img",{key:1,src:e.src,alt:"avatar",onError:t[0]||(t[0]=_=>s.value=!0)},null,40,N))],64)):B(e.$slots,"default",{key:1},()=>[u(x,{icon:"avatar",size:e.size},null,8,["size"])],!0),e.showStatus?(a(),r("i",T)):$("",!0)],6))}});const q=p(F,[["__scopeId","data-v-8e8ed01d"]]),G={class:"user-name"},J={class:"text"},M={key:0,class:"status"},O=d({__name:"index",props:{username:{}},setup(c){const s=c,e=I(),t=V(),_=R(),m=C(),o=U(()=>{var l;return((l=e.currentRoute.value.params)==null?void 0:l.id)===s.username||!(t.username&&t.username!==_.params.id&&_.params.id&&m.online.has(_.params.id))&&t.username===s.username}),v=()=>{e.push({path:`/${s.username!==t.username?s.username:""}`})};return(l,_e)=>{const S=q;return a(),r("li",{class:w([{active:o.value},"user-list-item"]),tabindex:"0",onClick:v},[u(S,{size:24,src:null,online:!0,showStatus:""}),n("div",G,[n("div",J,z(s.username),1),i(m).active.has(s.username)?(a(),r("div",M)):$("",!0)])],2)}}});const j=p(O,[["__scopeId","data-v-874b73a9"]]),H={class:"user-list-wrapper"},K={class:"user-list-header"},Q=d({__name:"index",setup(c){const{online:s}=C();return(e,t)=>(a(),r("div",H,[n("div",K," 在线人数："+z(i(s).size),1),u(D,{tag:"ul",name:"fade",class:"user-list"},{default:k(()=>[(a(!0),r(b,null,L(i(s).entries(),([_])=>(a(),y(j,{key:_,username:_},null,8,["username"]))),128))]),_:1})]))}});const W=p(Q,[["__scopeId","data-v-41480700"]]);const X={class:"login-box"},Y=n("p",{class:"box-title"},"P2P多人在线聊天室",-1),Z={class:"box-body"},ee=n("label",{class:"label"},"用户名",-1),se=n("label",{class:"label"},"密码",-1),te=["disabled"],ae=n("p",{class:"tips"},"如果用户名未注册，登录将自动注册",-1),ne=d({__name:"index",setup(c){const s=h(""),e=h(""),{loginState:t,handleLogin:_}=V();return(m,o)=>{const v=P;return a(),y(v,{class:"login-box-modal",modelValue:i(t).showLogin,"onUpdate:modelValue":o[3]||(o[3]=l=>i(t).showLogin=l),width:380,center:""},{default:k(()=>[n("div",X,[Y,n("div",Z,[ee,f(n("input",{class:"input","onUpdate:modelValue":o[0]||(o[0]=l=>s.value=l),placeholder:"3-8位中文、字母和数字"},null,512),[[g,s.value]]),se,f(n("input",{class:"input",type:"password","onUpdate:modelValue":o[1]||(o[1]=l=>e.value=l),placeholder:"6-9位字母和数字"},null,512),[[g,e.value]]),n("button",{class:"login",onClick:o[2]||(o[2]=l=>i(_)(s.value,e.value)),disabled:i(t).loading}," 登录 ",8,te),ae])])]),_:1},8,["modelValue"])}}});const oe={class:"home"},le=d({__name:"index",setup(c){return(s,e)=>{const t=A("RouterView");return a(),r("main",oe,[u(W),u(ne),u(t)])}}});const ue=p(le,[["__scopeId","data-v-0355815e"]]);export{ue as default};
